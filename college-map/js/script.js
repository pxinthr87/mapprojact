
var map = L.map('map').setView([13.539973, 100.620207], 17);

L.tileLayer(
  'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
  { attribution: '¬© Esri' }
).addTo(map);

var buildings = [
  {
    name: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 1",
    lat: 13.539755,
    lng: 100.620095,
    images: ["images/building1.jpg","images/building4.png"],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£"
  },
  {
    name: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 2",
    lat: 13.540015,
    lng: 100.619764,
    images: ["images/building2.jpg", "images/building3.png"],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î/‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô"
  },
  {
    name: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 3",
    lat: 13.539242,
    lng: 100.619722,
    images: ["images/building5.png"],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢/‡∏™‡∏±‡∏á‡∏Ñ‡∏°/‡∏´‡πâ‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏ú‡∏•"
  },
  {
    name: "‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î",
    lat: 13.53926,
    lng: 100.619964,
    images: ["images/building6.png"],
    detail: "‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î"
  },
  {
    name: "‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
    lat: 13.538444,
    lng: 100.619906, 
    images: ["images/building7.png"],
    detail: "‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£1"
  },
   {
    name: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 9",
    lat: 13.539474,
    lng: 100.619232, 
    images: ["images/building8.png"],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå/‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÉ‡∏´‡∏ç‡πà"
  },
  {
    name: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏®‡∏¥‡∏•‡∏õ‡∏Å‡∏£‡∏£‡∏°",
    lat: 13.539123,
    lng: 100.619250, 
    images: ["images/building9.png"],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏Å‡∏£‡∏£‡∏°/‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡∏£‡∏≤‡∏ü‡∏ü‡∏¥‡∏Ñ"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡∏¢‡∏ô‡∏ï‡πå",
    lat: 13.53875,
    lng: 100.618725,
    images: ["images/building10.png",],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡∏ä‡πà‡∏≤‡∏á‡∏¢‡∏ô‡∏ï‡πå"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏•‡∏´‡∏∞",
    lat: 13.538613,
    lng: 100.61928,
    images: ["images/building11.png",],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏•‡∏´‡∏∞"
  },
   {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á",
    lat: 13.538787,
    lng: 100.61833,
    images: ["images/building12.png",],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡∏ä‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏≠/‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß/‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°",
    lat: 13.538315,
    lng: 100.619144,
    images: ["images/building13.png","images/building14.png","images/building15.png",],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏≠/‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß/‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£",
    lat: 13.537973,
    lng: 100.619485,
    images: ["images/building16.png",],
    detail: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£"
  },
   {
    name: "‡∏á‡∏≤‡∏ô‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤",
    lat: 13.537973,
    lng: 100.619173,
    images: ["images/building17.png",],
    detail: "‡∏á‡∏≤‡∏ô‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤"
  },
  {
    name: "‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏",
    lat: 13.538265,
    lng: 100.61947,
    images: ["images/building18.png",],
    detail: "‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏"
  },
  {
    name: "‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ 2",
    lat: 13.537643,
    lng: 100.617555,
    images: ["images/building19.png",],
    detail: "‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ 2"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡πà‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏¢‡∏≤‡∏ô",
    lat: 13.537555,
    lng: 100.617777,
    images: ["images/building20.png",],
    detail: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡πà‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏¢‡∏≤‡∏ô"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®/‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°",
    lat: 13.537387,
    lng: 100.617725,
    images: ["images/building21.png","images/building22.png",],
    detail: "‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®/‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°"
  },
  {
    name: "‡∏™‡∏≤‡∏Ç‡∏≤‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï/‡∏™‡∏≤‡∏Ç‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏•",
    lat: 13.538126,
    lng: 100.618847,
    images: ["images/building23.png",],
    detail: "‡∏™‡∏≤‡∏Ç‡∏≤‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï/‡∏™‡∏≤‡∏Ç‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏•"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡πÇ‡∏•‡∏´‡∏∞‡πÅ‡∏ú‡πà‡∏ô",
    lat: 13.538351,
    lng: 100.619057,
    images: ["images/building24.png",],
    detail: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡πÇ‡∏•‡∏´‡∏∞‡πÅ‡∏ú‡πà‡∏ô"
  },
   {
    name: "‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏•‡πÅ‡∏•‡∏∞‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå",
    lat: 13.538043,
    lng: 100.618847,
    images: ["images/building25.png",],
    detail: "‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏•‡πÅ‡∏•‡∏∞‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå"
  },
   {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á",
    lat: 13.538363,
    lng: 100.618279,
    images: ["images/building26.png",],
    detail: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡πÇ‡∏•‡∏´‡∏∞",
    lat: 13.537819,
    lng: 100.618723,
    images: ["images/building27.png",],
    detail: "‡πÅ‡∏ú‡∏ô‡∏Å‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡πÇ‡∏•‡∏´‡∏∞"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå",
    lat: 13.537517,
    lng: 100.618267,
    images: ["images/building28.png",],
    detail: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå"
  },
   {
    name: "‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏µ‡∏¨‡∏≤/‡∏•‡∏≤‡∏ô‡∏à‡∏≠‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô",
    lat: 13.537977,
    lng: 100.617868,
    images: ["images/building29.png",],
    detail: "‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏µ‡∏¨‡∏≤/‡∏•‡∏≤‡∏ô‡∏à‡∏≠‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô"
  },
  {
    name: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å",
    lat: 13.537458,
    lng: 100.618655,
    images: ["images/building30.png",],
    detail: "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å"
  },
];

// ‡πÄ‡∏Å‡πá‡∏ö marker ‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
var buildingMarkers = [];
buildings.forEach(b => {
  let imagesHtml = '';
  if (b.images && Array.isArray(b.images)) {
    imagesHtml = b.images.map(img => `<img src="${img}" style="width:200px;margin-bottom:5px;"><br>`).join('');
  } else if (b.image) {
    imagesHtml = `<img src="${b.image}" style="width:200px"><br>`;
  }
  var marker = L.marker([b.lat, b.lng])
    .addTo(map)
    .bindPopup(`
      <b>${b.name}</b><br>
      ${imagesHtml}
      <small>${b.detail}</small><br>
      <a href="https://www.google.com/maps/dir/?api=1&destination=${b.lat},${b.lng}" target="_blank" style="color:blue;text-decoration:underline;">
        üß≠ ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á
      </a>
    `);
  buildingMarkers.push({ marker, detail: b.detail });
});

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ detail
function searchDetail() {
  var input = document.getElementById('search-input');
  var keyword = input.value.trim();
  if (!keyword) return;
  var found = false;
  for (var i = 0; i < buildingMarkers.length; i++) {
    if (buildingMarkers[i].detail && buildingMarkers[i].detail.indexOf(keyword) !== -1) {
      var m = buildingMarkers[i].marker;
      map.setView(m.getLatLng(), 19);
      m.openPopup();
      found = true;
      break;
    }
  }
  if (!found) {
    alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤');
  }
}

// Event ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
document.addEventListener('DOMContentLoaded', function() {
  var btn = document.getElementById('search-btn');
  var input = document.getElementById('search-input');
  if (btn && input) {
    btn.addEventListener('click', searchDetail);
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') searchDetail();
    });
  }
});

